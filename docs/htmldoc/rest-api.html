<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="generator" content="AsciiDoc 8.6.8, bootstrap backend 4.5.0">
    <title>CPM REST API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- AsciiDoc Bootstrap styles -->
    <link rel="stylesheet" type="text/css" id="bootstrapTheme" href="./stylesheets/asciidoc-bootstrap.cerulean.min.css">
    <!-- Back to top (jquery plugin) -->
    <link rel="stylesheet" type="text/css" href="./stylesheets/ui.totop.css">

    <!--[if (lt IE 9) & (!IEMobile)]>
        <script src="./javascripts/html5shiv.min.js"></script>
        <script src="./javascripts/respond.min.js"></script>
    <![endif]-->

  </head>
  <body id="toc-top">
    <div id="page">


      <div class="jumbotron">
        <div class="container">
          <h1>CPM REST API</h1>
        </div>
      </div>

  <div id="content" class="container">

    <div class="row">




        <div class="col-md-9" role="main">
<div class="section">
    <h1 class="page-header" id="cpm_admin_api">1. CPM Admin API</h1>
<div class="paragraph"><p>The CPM Admin REST API is how CPM functionality is exposed both for the cpm-web user interface
and also for custom written scripts or applications that a CPM developer might want
to build.  The REST API is developed using golang&#8217;s http package and is served
up by the cpmadminserver golang program.  The cpm-admin container when run exposes
this REST API.  The cpm-web web user interface accesses the cpm-admin REST API for
all it&#8217;s functionality.</p></div>
<h2 id="security">1.1. Security</h2>
<h3 id="login_and_return_an_auth_token">1.1.1. login and return an auth token</h3>
<div class="paragraph"><p><code>GET /sec/login/:ID.:PSW</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the user id to authenticate with
</p>
</li>
<li>
<p>
PSW : the user password to authenticate with
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/sec/login/cpm.cpm</pre>
</div></div>
<h3 id="logout_of_a_user_session">1.1.2. logout of a user session</h3>
<div class="paragraph"><p><code>GET /sec/logout/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/sec/logout/ab3ba695-533-43a4-a3c0-9a4c55288c14</pre>
</div></div>
<h3 id="update_a_user_account">1.1.3. update a user account</h3>
<div class="paragraph"><p><code>POST /sec/updateuser</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @provision-proxy.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/provisionproxy</pre>
</div></div>
<h3 id="change_a_user_password">1.1.4. change a user password</h3>
<div class="paragraph"><p><code>POST /sec/cp</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @changepassword.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/changepassword</pre>
</div></div>
<h3 id="add_a_user">1.1.5. add a user</h3>
<div class="paragraph"><p><code>POST /sec/adduser</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @adduser.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/adduser</pre>
</div></div>
<h3 id="return_user_information">1.1.6. return user information</h3>
<div class="paragraph"><p><code>GET /sec/getuser/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/sec/getuser/cpm.1efbfd5-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_all_users_information">1.1.7. return all users information</h3>
<div class="paragraph"><p><code>GET /sec/getusers/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/sec/getusers/1efbfd50-9b2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="delete_a_user">1.1.8. delete a user</h3>
<div class="paragraph"><p><code>GET /sec/deleteuser/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/sec/deleteuser/1.jkjkjadkjkajdkfjakdfjkad</pre>
</div></div>
<h3 id="update_a_cpm_role">1.1.9. update a CPM role</h3>
<div class="paragraph"><p><code>POST /sec/updaterole</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @updaterole.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/sec/updaterole</pre>
</div></div>
<h3 id="add_a_cpm_role">1.1.10. add a CPM role</h3>
<div class="paragraph"><p><code>POST /sec/addrole</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @addrole.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/sec/addrole</pre>
</div></div>
<h3 id="delete_a_cpm_role">1.1.11. delete a CPM role</h3>
<div class="paragraph"><p><code>GET /sec/deleterole/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/sec/deleterole/1.ajkajdkajdfkjadf</pre>
</div></div>
<h3 id="get_all_cpm_roles">1.1.12. get all CPM roles</h3>
<div class="paragraph"><p><code>GET /sec/getroles/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/sec/getroles/1efbfd50-9b2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="get_a_cpm_role">1.1.13. get a CPM role</h3>
<div class="paragraph"><p><code>GET /sec/getrole/:Name.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001sec/getrole/superuser.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h2 id="project_information">1.2. Project Information</h2>
<h3 id="adds_a_project">1.2.1. adds a project</h3>
<div class="paragraph"><p><code>POST /project/add</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : can be empty
</p>
</li>
<li>
<p>
Name : the name to use for this project
</p>
</li>
<li>
<p>
Desc : the project description
</p>
</li>
<li>
<p>
CreateDt : can be empty
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl -X POST -d @addproject.json http://cpm-admin:13001/project/add</pre>
</div></div>
<h3 id="return_all_projects">1.2.2. return all projects</h3>
<div class="paragraph"><p><code>GET /project/getall/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl http://cpm-admin.crunchy.lab:13001/project/getall/1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_a_single_project">1.2.3. return a single project</h3>
<div class="paragraph"><p><code>GET /project/get/:ID.Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : id of a project
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl http://cpm-admin.crunchy.lab:13001/project/get/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="delete_a_single_project">1.2.4. delete a single project</h3>
<div class="paragraph"><p><code>GET /project/delete/:ID.Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : id of a project
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl http://cpm-admin.crunchy.lab:13001/project/delete/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="updates_a_project">1.2.5. updates a project</h3>
<div class="paragraph"><p><code>POST /project/update</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the generated id of a project
</p>
</li>
<li>
<p>
Name : the name to use for this project
</p>
</li>
<li>
<p>
Desc : the description of the project
</p>
</li>
<li>
<p>
UpdateDate : can be empty
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl -X POST -d @updateproject.json http://cpm-admin.crunchy.lab:13001/project/update</pre>
</div></div>
<h3 id="return_a_list_of_containers_in_a_project">1.2.6. return a list of containers in a project</h3>
<div class="paragraph"><p><code>GET /projectnodes/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the unique assigned ID of a project
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/projectnodes/1.8dc0caed-39e7-47b4-878c-de1c8b0b595d</pre>
</div></div>
<h2 id="container_information">1.3. Container Information</h2>
<h3 id="stop_a_container_postgres">1.3.1. stop a container postgres</h3>
<div class="paragraph"><p><code>GET /admin/stop-pg/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/admin/stop-pg/8.1efbfd5-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="stop_a_container">1.3.2. stop a container</h3>
<div class="paragraph"><p><code>GET /admin/stop/:ID.:Token</code>
* Token : the generated auth token for this session</p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/admin/stop/8.1efbfd50-9b2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="start_a_container">1.3.3. start a container</h3>
<div class="paragraph"><p><code>GET /admin/start/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/admin/start/8.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="start_a_containers_postgres_database">1.3.4. start a containers postgres database</h3>
<div class="paragraph"><p><code>GET /admin/start-pg/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/admin/start-pg/1.8dc0caed-39e7-47b4-878c-de1c8b0b595d</pre>
</div></div>
<h3 id="return_a_container">1.3.5. return a container</h3>
<div class="paragraph"><p><code>GET /node/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/node/8.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="delete_a_container">1.3.6. delete a container</h3>
<div class="paragraph"><p><code>GET /deletenode/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/deletenode/17.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="provision_a_new_container">1.3.7. provision a new container</h3>
<div class="paragraph"><p><code>POST /provision</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Profile : the Docker profile to use for this node
</p>
</li>
<li>
<p>
Image : the Docker image name to base this node on
</p>
</li>
<li>
<p>
ServerID : the unique ID of the server to host this container
</p>
</li>
<li>
<p>
ContainerName : the user picked name for this container
</p>
</li>
<li>
<p>
Standalone : flag for making this node available to be part of a cluster
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @provision.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/provision</pre>
</div></div>
<h3 id="return_all_containers_not_in_a_cluster">1.3.8. return all containers not in a cluster</h3>
<div class="paragraph"><p><code>GET /nodes/nocluster/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/nodes/nocluster/1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_all_containers">1.3.9. return all containers</h3>
<div class="paragraph"><p><code>GET /nodes/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/nodes/1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<div class="paragraph"><p>## Proxy Information</p></div>
<h3 id="create_a_proxy_container">1.3.10. create a proxy container</h3>
<div class="paragraph"><p><code>POST /provisionproxy</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @provisionproxy.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/provisionproxy</pre>
</div></div>
<h3 id="return_proxy_information">1.3.11. return proxy information</h3>
<div class="paragraph"><p><code>GET /proxy/getbycontainerid/:ContainerID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ContainerID : the container ID of the proxy
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/proxy/getbycontainerid/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="update_a_proxy_container">1.3.12. update a proxy container</h3>
<div class="paragraph"><p><code>POST /proxy/update</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @proxyupdate.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/proxy/update</pre>
</div></div>
<h2 id="access_rule_information">1.4. Access Rule Information</h2>
<h3 id="get_an_access_rule">1.4.1. get an access rule</h3>
<div class="paragraph"><p><code>GET /rules/get/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the access rule ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/rules/get/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="get_all_access_rules">1.4.2. get all access rules</h3>
<div class="paragraph"><p><code>GET /rules/getall/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/rules/getall/1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="delete_an_access_rule">1.4.3. delete an access rule</h3>
<div class="paragraph"><p><code>GET /rules/delete/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the access rule ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/rules/delete/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="update_an_access_rule">1.4.4. update an access rule</h3>
<div class="paragraph"><p><code>POST /rules/update</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @ruleupdate.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/rules/update</pre>
</div></div>
<h3 id="insert_an_access_rule">1.4.5. insert an access rule</h3>
<div class="paragraph"><p><code>POST /rules/insert</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @ruleinsert.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/rules/insert</pre>
</div></div>
<h3 id="get_all_accessrules_for_a_container">1.4.6. get all accessrules for a container</h3>
<div class="paragraph"><p><code>GET /containerrules/getall/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/containerrules/getall/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="update_accessrules_for_a_container">1.4.7. update accessrules for a container</h3>
<div class="paragraph"><p><code>POST /containerrules/update</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @containerrulesupdate.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/containerrules/update</pre>
</div></div>
<h2 id="server_information">1.5. Server Information</h2>
<h3 id="perform_a_docker_start_on_all_containers_on_a_given_server">1.5.1. perform a docker start on all containers on a given server</h3>
<div class="paragraph"><p><code>GET /admin/startall/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the unique ID for a server
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/admin/startall/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="perform_a_docker_stop_on_all_containers_on_a_given_server">1.5.2. perform a docker stop on all containers on a given server</h3>
<div class="paragraph"><p><code>GET /admin/stopall/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the unique ID for a server
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/admin/stopall/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_all_containers_for_a_server">1.5.3. return all containers for a server</h3>
<div class="paragraph"><p><code>GET /nodes/forserver/:ServerID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ServerID : the unique ID for a server
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/nodes/forserver/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_a_server">1.5.4. return a server</h3>
<div class="paragraph"><p><code>GET /server/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the unique assigned ID of a server
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/1.8dc0caed-39e7-47b4-878c-de1c8b0b595d</pre>
</div></div>
<h3 id="delete_a_server">1.5.5. delete a server</h3>
<div class="paragraph"><p><code>GET /deleteserver/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the unique assigned ID of a server
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/deleteserver/1.jkjakdjfkjadkfjkajdf</pre>
</div></div>
<h3 id="returns_all_servers">1.5.6. returns all servers</h3>
<div class="paragraph"><p><code>GET /servers/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/servers/789c31ff-b18f-47b3-bb63-1fd603895aa5</pre>
</div></div>
<h3 id="get_all_the_servers_defined_in_cpm">1.5.7. Get all the servers defined in CPM</h3>
<div class="paragraph"><p><code>GET /servers/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the security token used for auth
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/servers/789c31ff-b18f-47b3-bb63-1fd603895aa5</pre>
</div></div>
<h3 id="add_a_server">1.5.8. add a server</h3>
<div class="paragraph"><p><code>GET /addserver/:ID.:Name.:IPAddress.:DockerBridgeIP.:PGDataPath.:ServerClass.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : 0 for adding a new server&#8230;non-zero is to update a server
</p>
</li>
<li>
<p>
Name : the server name
</p>
</li>
<li>
<p>
IPAddress : the server IP address
</p>
</li>
<li>
<p>
DockerBridgeIP : the Docker Bridge IP to use for this server
</p>
</li>
<li>
<p>
PGDataPath : the root file path to where PG data files will be stored
</p>
</li>
<li>
<p>
ServerClass : the server class we are assiging to this server (low|medium|high)
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>curl  http<span style="color: #990000">:</span>//cpm-admin<span style="color: #990000">.</span>crunchy<span style="color: #990000">.</span>lab<span style="color: #990000">:</span><span style="color: #993399">13001</span>/addserver<span style="color: #990000">/</span><span style="color: #993399">1</span><span style="color: #990000">.</span>foo<span style="color: #990000">.</span><span style="color: #993399">192</span>-<span style="color: #993399">168</span>-<span style="color: #993399">0</span>-<span style="color: #993399">104.171</span>-<span style="color: #993399">10</span>-<span style="color: #993399">10</span>-<span style="color: #993399">17</span><span style="color: #990000">.</span></tt></pre></div></div>
<h2 id="database_user_information">1.6. Database User Information</h2>
<h3 id="add_a_database_user_to_a_given_container">1.6.1. add a database user to a given container</h3>
<div class="paragraph"><p><code>POST /dbuser/add</code></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>curl --data @dbuseradd<span style="color: #990000">.</span>json -H <span style="color: #FF0000">"Content-Type: application/json"</span> -X POST <span style="color: #990000">\</span>
http<span style="color: #990000">:</span>//cpm-admin<span style="color: #990000">:</span><span style="color: #993399">13001</span>/dbuser/add</tt></pre></div></div>
<h3 id="update_a_database_user_to_a_given_container">1.6.2. update a database user to a given container</h3>
<div class="paragraph"><p><code>POST /dbuser/update</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @dbuserupdate.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/dbuser/update</pre>
</div></div>
<h3 id="delete_a_database_user_for_a_given_container">1.6.3. delete a database user for a given container</h3>
<div class="paragraph"><p><code>GET /dbuser/delete/:ContainerID.:Rolname.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ContainerID : the container ID
</p>
</li>
<li>
<p>
Rolname : the role name we are deleting
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/dbuser/delete/1.foo.kjakdjfkajdkfj</pre>
</div></div>
<h3 id="get_a_database_user_for_a_given_container">1.6.4. get a database user for a given container</h3>
<div class="paragraph"><p><code>GET /dbuser/get/:ContainerID.:Rolname.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ContainerID : the container ID
</p>
</li>
<li>
<p>
Rolname : the role name we are fetching
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/dbuser/get/1.foo.kjakdjfkajdkfj</pre>
</div></div>
<h3 id="get_all_database_users_for_a_given_container">1.6.5. get all database users for a given container</h3>
<div class="paragraph"><p><code>GET /dbuser/getall/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ContainerID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/dbuser/getall/1.kjakdjfkajdkfj</pre>
</div></div>
<h2 id="cluster_information">1.7. Cluster Information</h2>
<h3 id="add_a_node_to_a_cluster">1.7.1. add a node to a cluster</h3>
<div class="paragraph"><p><code>GET /event/join-cluster/:IDList.:MasterID.:ClusterID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/event/join-cluster/1.1.1.789c31ff-b18f-47b3-bb63-1fd603895aa5</pre>
</div></div>
<h3 id="cause_a_postgres_fail_over_on_a_given_container">1.7.2. cause a postgres fail over on a given container</h3>
<div class="paragraph"><p><code>GET /admin/failover/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/admin/failover/1.789c31ff-b18f-47b3-bb63-1fd603895aa5</pre>
</div></div>
<h3 id="return_all_containers_for_a_given_cluster">1.7.3. return all containers for a given cluster</h3>
<div class="paragraph"><p><code>GET /clusternodes/:ClusterID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ClusterID : the unique ID of a cluster
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/clusternodes/2.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="perform_a_docker_stop_on_a_given_clusters_set_of_containers">1.7.4. perform a docker stop on a given clusters set of containers</h3>
<div class="paragraph"><p><code>GET /cluster/stop/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the unique assigned ID of a cluster
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/cluster/stop/2.1efbfd50-9bb243a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="perform_a_docker_start_on_a_given_clusters_set_of_containers">1.7.5. perform a docker start on a given clusters set of containers</h3>
<div class="paragraph"><p><code>GET /cluster/start/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the unique assigned ID of a cluster
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/cluster/start/2.1efbfd50-9bb243a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_a_cluster">1.7.6. return a cluster</h3>
<div class="paragraph"><p><code>GET /cluster/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the unique assigned ID of a cluster
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/cluster/2.1efbfd50-9bb243a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="configure_a_cluster">1.7.7. configure a cluster</h3>
<div class="paragraph"><p><code>GET /cluster/configure/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the unique assigned ID of a cluster
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/cluster/configure/2.1efbfd50-9bb243a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="delete_a_cluster_and_its_containers">1.7.8. delete a cluster and its containers</h3>
<div class="paragraph"><p><code>GET /cluster/delete/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the unique assigned ID of a cluster
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/cluster/delete/1.1efbfd50-9bb243a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="get_all_the_clusters_for_a_given_project">1.7.9. Get all the clusters for a given project</h3>
<div class="paragraph"><p><code>GET /projectclusters/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the user id to authenticate with
</p>
</li>
<li>
<p>
Token : the security token used for auth
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/projectclusters/1.789c31ff-b18f-47b3-bb63-1fd603895aa5</pre>
</div></div>
<h3 id="updates_or_adds_a_cluster">1.7.10. updates or adds a cluster</h3>
<div class="paragraph"><p><code>POST /cluster</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @postcluster.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/cluster</pre>
</div></div>
<h3 id="performs_an_auto_cluster">1.7.11. performs an auto-cluster</h3>
<div class="paragraph"><p><code>POST /autocluster</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Name : the name to use for this cluster
</p>
</li>
<li>
<p>
ClusterType : the type of cluster (synchronous|asynchronous)
</p>
</li>
<li>
<p>
ClusterProfile : the cluster profile to use for cluster creation (SM|LG|MED)
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @autocluster.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/autocluster</pre>
</div></div>
<h3 id="returns_all_clusters">1.7.12. returns all clusters</h3>
<div class="paragraph"><p><code>GET /clusters/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/clusters/789c31ff-b18f-47b3-bb63-1fd603895aa5</pre>
</div></div>
<h3 id="add_a_standby_node_to_a_given_cluster">1.7.13. add a standby node to a given cluster</h3>
<div class="paragraph"><p><code>GET /cluster/scale/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : unique id of a given cluster
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/cluster/scale/1.789c31ff-b18f-47b3-bb63-1fd603895aa5</pre>
</div></div>
<h2 id="task_information">1.8. Task Information</h2>
<h3 id="execute_a_task_schedule_immediately">1.8.1. execute a task schedule immediately</h3>
<div class="paragraph"><p><code>POST /task/executenow</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @executenow.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/task/executenow</pre>
</div></div>
<h3 id="add_a_new_container_schedule">1.8.2. add a new container schedule</h3>
<div class="paragraph"><p><code>POST /task/addschedule</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @addschedule.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/task/addschedule</pre>
</div></div>
<h3 id="remove_a_container_schedule">1.8.3. remove a container schedule</h3>
<div class="paragraph"><p><code>GET /task/deleteschedule/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/task/deleteschedule/1.kjkjadfjkajdfkjadksf</pre>
</div></div>
<h3 id="update_a_container_schedule">1.8.4. update a container schedule</h3>
<div class="paragraph"><p><code>POST /task/updateschedule</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @updateschedule.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/task/updateschedule</pre>
</div></div>
<h3 id="get_all_schedules_for_a_container">1.8.5. get all schedules for a container</h3>
<div class="paragraph"><p><code>GET /task/getschedules/:ContainerName.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/task/getschedules/foo.kjadkfjkjakdjfkadjf</pre>
</div></div>
<h3 id="get_a_container_schedule">1.8.6. get a container schedule</h3>
<div class="paragraph"><p><code>GET /task/getschedule/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/task/getschedule/1.fkjkjadkfjkjadsfjkdaf</pre>
</div></div>
<h3 id="get_a_schedule_job_status">1.8.7. get a schedule job status</h3>
<div class="paragraph"><p><code>GET /task/getstatus/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/task/getstatus/1.kjakdjfkajkdjfkjadfasdf</pre>
</div></div>
<h3 id="deletes_a_task_schedule_history">1.8.8. deletes a task schedule history</h3>
<div class="paragraph"><p><code>POST /task/deletestatus</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @deletetaskstatus.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/task/deletestatus</pre>
</div></div>
<h3 id="get_all_scheduled_job_status_for_a_container">1.8.9. get all scheduled job status for a container</h3>
<div class="paragraph"><p><code>GET /task/getallstatus/:ID.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/task/getallstatus/1.kjakjadfjkjaksdjfkajdf</pre>
</div></div>
<h3 id="todo">1.8.10. TODO</h3>
<div class="paragraph"><p><code>GET /task/nodes/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/task/nodes/kjakjfjkadjfkjkajdf</pre>
</div></div>
<h2 id="settings">1.9. Settings</h2>
<h3 id="saves_profiles">1.9.1. saves profiles</h3>
<div class="paragraph"><p><code>POST /saveprofiles</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @saveprofiles.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/saveprofiles</pre>
</div></div>
<h3 id="saves_cluster_profiles">1.9.2. saves cluster profiles</h3>
<div class="paragraph"><p><code>POST /saveclusterprofiles</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @saveclusterprofiles.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/saveclusterprofiles</pre>
</div></div>
<h3 id="update_a_setting_value">1.9.3. update a setting value</h3>
<div class="paragraph"><p><code>POST /savesetting</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl --data @savesetting.json -H "Content-Type: application/json" -X POST \
http://cpm-admin:13001/savesetting</pre>
</div></div>
<h3 id="returns_all_settings">1.9.4. returns all settings</h3>
<div class="paragraph"><p><code>GET /settings/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/settings/789c31ff-b18f-7b3-bb63-1fd603895aa5</pre>
</div></div>
<h2 id="monitoring">1.10. Monitoring</h2>
<h3 id="gethc1_health_check_1_databases_down">1.10.1. GetHC1 - health check 1 - databases down</h3>
<div class="paragraph"><p><code>GET /mon/healthcheck/:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/mon/healthcheck/24c715ca-2468-4450-8fee-6e2a9f7714dc</pre>
</div></div>
<h3 id="return_container_pg_settings_data">1.10.2. return container pg_settings data</h3>
<div class="paragraph"><p><code>GET /monitor/container/settings/:ID.Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/monitor/container/settings/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_container_pg_replication_data">1.10.3. return container pg_replication data</h3>
<div class="paragraph"><p><code>GET /monitor/container/repl/:ID.Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/monitor/container/repl/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_container_pg_databases_data">1.10.4. return container pg_databases data</h3>
<div class="paragraph"><p><code>GET /monitor/container/database/:ID.Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/monitor/container/database/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_container_bgwriter_data">1.10.5. return container bgwriter data</h3>
<div class="paragraph"><p><code>GET /monitor/container/bgwriter/:ID.Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/monitor/container/bgwriter/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_container_controldata_data">1.10.6. return container controldata data</h3>
<div class="paragraph"><p><code>GET /monitor/container/controldata/:ID.Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
ID : the container ID
</p>
</li>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/monitor/container/controldata/1.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="return_server_monitoring_data">1.10.7. return server monitoring data</h3>
<div class="paragraph"><p><code>GET /monitor/server-getinfo/:ServerID.:Metric.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/monitor/server-getinfo/1.cpmdf.1efbfd50-9bb2-43a0-8c91-b6f4a837a4f2</pre>
</div></div>
<h3 id="perform_a_load_test_and_return_the_results">1.10.8. perform a load test and return the results</h3>
<div class="paragraph"><p><code>GET /monitor/container/loadtest/:ID.:Writes.:Token</code></p></div>
<div class="ulist"><ul>
<li>
<p>
Token : the generated auth token for this session
</p>
</li>
</ul></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin:13001/monior/container/loadtest/1.1000.9a8f9a1e-9c81-4e4f-9f52-01d2ea6cd741</pre>
</div></div>
<h3 id="returns_the_cpm_version_number">1.10.9. returns the CPM version number</h3>
<div class="paragraph"><p><code>GET /version</code></p></div>
<div class="paragraph"><p>[source,bash}</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>curl  http://cpm-admin.crunchy.lab:13001/version</pre>
</div></div>
</div>
        </div>  <!-- /.col-md-9 -->
        <div class="col-md-3">
        <div id="sidebar">
    <div class="toc2">
<div class="panel panel-default">
<div class="panel-heading">Table of Contents</div>
<div class="panel-body" id="toc">
</div>
</div>
    </div>
</div>
        </div>  <!-- /.col-md-3 -->
    </div>  <!-- /.row -->

  </div>  <!-- /.container -->

    <footer id="footer" role="contentinfo">
        <div class="container">
<div class="row"><div id="footnotes"></div></div>
<div id="footer-text">
Last updated 2015-12-14 09:43:17 CST
<br>Built with <a href="https://github.com/llaville/asciidoc-bootstrap-backend">AsciiDoc-Bootstrap backend</a> 4.5.0
</div>
        </div>
    </footer>

    <script src="./javascripts/jquery.min.js"></script>
    <script src="./bootstrap/js/bootstrap.min.js"></script>
    <script src="./javascripts/asciidoc.js"></script>
    <!-- Install TOC and/or footnotes (if necessary) -->
    <script type="text/javascript">asciidoc.install(2);</script>

    <script src="./javascripts/jquery.ui.totop.min.js"></script>



    <!-- Remove footnotes if empty block -->
    <script type="text/javascript">$(function(){ if ($("#footnotes div").length == 0) $("#footnotes").parent().remove(); });</script>

    <script type="text/javascript">$(function(){ if ($("#dropdown-menu-versions")) $("#dropdown-menu-versions").parent().remove(); });</script>

    <script type="text/javascript">$(function(){ $().UItoTop(); });</script>
    </div> <!-- page -->
  </body>
</html>
